<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tornado-Smack &mdash; tornado-smack 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="tornado-smack 0.1 documentation" href="#" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="#">tornado-smack 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tornado-smack">
<h1>Tornado-Smack<a class="headerlink" href="#tornado-smack" title="Permalink to this headline">¶</a></h1>
<div class="section" id="syntactic-sugar-for-tornado">
<h2>Syntactic sugar for tornado<a class="headerlink" href="#syntactic-sugar-for-tornado" title="Permalink to this headline">¶</a></h2>
<p>Turns your application from this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Hello, world </span><span class="si">%s</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

<span class="n">application</span> <span class="o">=</span> <span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">([</span>
    <span class="p">(</span><span class="s">r&quot;^/foobar/(\w+)/?$&quot;</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
<span class="p">])</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">application</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8888</span><span class="p">)</span>
    <span class="n">tornado</span><span class="o">.</span><span class="n">ioloop</span><span class="o">.</span><span class="n">IOLoop</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>to this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">()</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/foobar/&lt;name&gt;&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foobar</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;hello world </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">name</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-templates">
<h2>Using templates<a class="headerlink" href="#using-templates" title="Permalink to this headline">¶</a></h2>
<p>you can use ./templates folder - default path - and return a template easily like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">tornado_smack</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/foobar/&lt;name&gt;&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foobar</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">&#39;foobar.html&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-async-handlers">
<h2>Using Async. Handlers<a class="headerlink" href="#using-async-handlers" title="Permalink to this headline">¶</a></h2>
<p>also for your async pleasure, you can do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/async&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;HEAD&#39;</span><span class="p">])</span>
<span class="nd">@coroutine</span>
<span class="k">def</span> <span class="nf">homepage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">http_client</span> <span class="o">=</span> <span class="n">AsyncHTTPClient</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">http_client</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s">&quot;https://google.com/&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-smack-with-tornado-together">
<h2>Using Smack with Tornado together<a class="headerlink" href="#using-smack-with-tornado-together" title="Permalink to this headline">¶</a></h2>
<p>you can always use them together like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">tornado_smack</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">import</span> <span class="nn">tornado.web</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">()</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/foobar/&lt;id&gt;&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foobar2</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;hello world </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">id</span>

<span class="k">class</span> <span class="nc">MainHandler</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Hello, world </span><span class="si">%s</span><span class="s"> &quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>


<span class="n">application</span> <span class="o">=</span> <span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">([</span>
    <span class="p">(</span><span class="s">r&quot;^/foo/(\w+)/?$&quot;</span><span class="p">,</span> <span class="n">MainHandler</span><span class="p">),</span>
<span class="p">]</span> <span class="o">+</span> <span class="n">app</span><span class="o">.</span><span class="n">get_routes</span><span class="p">())</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">application</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8888</span><span class="p">)</span>
    <span class="n">tornado</span><span class="o">.</span><span class="n">ioloop</span><span class="o">.</span><span class="n">IOLoop</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>You can install it with pip:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install tornado_smack
</pre></div>
</div>
</div>
<div class="section" id="api-documentation">
<h2>Api Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tornado_smack.app.App">
<em class="property">class </em><tt class="descclassname">tornado_smack.app.</tt><tt class="descname">App</tt><big>(</big><em>debug=False</em>, <em>template_path=None</em><big>)</big><a class="headerlink" href="#tornado_smack.app.App" title="Permalink to this definition">¶</a></dt>
<dd><p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">tornado_smack</span> <span class="kn">import</span> <span class="n">App</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;hello&quot;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>debug</strong> &#8211; enables werkzeug debugger</li>
<li><strong>template_path</strong> &#8211; we normally look for template in ./templates folder of your app.py
you can explicitly set for some other template path</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="tornado_smack.app.App.get_routes">
<tt class="descname">get_routes</tt><big>(</big><big>)</big><a class="headerlink" href="#tornado_smack.app.App.get_routes" title="Permalink to this definition">¶</a></dt>
<dd><p>returns our compiled routes and classes as a list to be used in tornado</p>
</dd></dl>

<dl class="method">
<dt id="tornado_smack.app.App.is_werkzeug_route">
<tt class="descname">is_werkzeug_route</tt><big>(</big><em>route</em><big>)</big><a class="headerlink" href="#tornado_smack.app.App.is_werkzeug_route" title="Permalink to this definition">¶</a></dt>
<dd><p>does it look like a werkzeug route or direct reg exp. of
tornado.</p>
</dd></dl>

<dl class="method">
<dt id="tornado_smack.app.App.route">
<tt class="descname">route</tt><big>(</big><em>rule</em>, <em>methods=None</em>, <em>werkzeug_route=None</em>, <em>tornado_route=None</em>, <em>handler_bases=None</em>, <em>nowrap=None</em><big>)</big><a class="headerlink" href="#tornado_smack.app.App.route" title="Permalink to this definition">¶</a></dt>
<dd><p>our super handy dandy routing function, usually you create an application,
and decorate your functions so they become RequestHandlers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">()</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/hello&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;foo&quot;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rule</strong> &#8211; this can be either a werkzeug route or a reg.expression as in tornado.
we try to understand the type of it automatically - wheter werkzeug or reg.exp. -
this by checking with a regexp. If it is a werkzeug route, we simply get the compiled
reg. exp from werkzeug and pass it to tornado handlers.</li>
<li><strong>methods</strong> &#8211; <p>methods can be a combination of [&#8216;GET&#8217;, &#8216;POST&#8217;, &#8216;HEAD&#8217;, &#8216;PUT&#8217;...]
any http verb that tornado accepts. Behind the scenes we create a class
and attach these methods.</p>
<p>for example something like:</p>
<div class="highlight-python"><div class="highlight"><pre>class HelloHandler(tornado.web.RequestHandler):
    def get(self):
</pre></div>
</div>
</li>
<li><strong>werkzeug_route</strong> &#8211; we explicitly tell that this is a werkzeug route, in case auto detection fails.</li>
<li><strong>tornado_route</strong> &#8211; we explicitly tell that this is a tornado reg. exp. route</li>
<li><strong>handler_bases</strong> &#8211; <p>for debug we create DebuggableHandler, and for normal operations we create
tornado.web.RequestHandler but in case you want to use your own classes for request
handling, you can pass it with handler_bases parameter. So behind the scenes this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@route</span><span class="p">(</span><span class="s">&quot;/foo&quot;</span><span class="p">,</span> <span class="n">handler_bases</span><span class="o">=</span><span class="p">(</span><span class="n">MyHandler</span><span class="p">,))</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>becomes this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">HelloHandler</span><span class="p">(</span><span class="n">MyHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</li>
<li><strong>nowrap</strong> &#8211; <p>if you add use self - or handler - as your first parameter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@route</span><span class="p">(</span><span class="s">&#39;/foo&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>if becomes something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">HelloHandler</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>if you omit self as your first parameter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@route</span><span class="p">(</span><span class="s">&#39;/foo&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;hello&quot;</span>
</pre></div>
</div>
<p>we implicitly wrap foo so it becomes something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">HelloHandler</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">foo</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>in case you want to use some other name for your first parameter,
or for some other reason you can explicitly say don&#8217;t wrap.</p>
<p>in case you are using tornado.coroutine or some other tornado decorator,
we don&#8217;t wrap your function - because simply it won&#8217;t work. so this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@route</span><span class="p">(</span><span class="s">&#39;/foo&#39;</span><span class="p">)</span>
<span class="nd">@coroutine</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>will give you an error.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tornado-Smack</a><ul>
<li><a class="reference internal" href="#syntactic-sugar-for-tornado">Syntactic sugar for tornado</a></li>
<li><a class="reference internal" href="#using-templates">Using templates</a></li>
<li><a class="reference internal" href="#using-async-handlers">Using Async. Handlers</a></li>
<li><a class="reference internal" href="#using-smack-with-tornado-together">Using Smack with Tornado together</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#api-documentation">Api Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2014, ybrs.
    </div>
  </body>
</html>